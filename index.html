<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار تشخيصي في المهارات الأساسية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .option-btn {
            transition: background-color 0.3s, transform 0.2s;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .correct {
            background-color: #22c55e !important;
            color: white;
            border-color: #16a34a !important;
        }
        .incorrect {
            background-color: #ef4444 !important;
            color: white;
            border-color: #dc2626 !important;
        }
    </style>
</head>
<body class="bg-stone-100 flex items-center justify-center min-h-screen p-4">

    <div id="quiz-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-6 md:p-8">
        
        <!-- Start Screen -->
        <div id="start-screen" class="text-center">
            <h1 class="text-3xl font-bold text-sky-800 mb-4">اختبار تشخيصي في المهارات الأساسية</h1>
            <p class="text-gray-600 mb-8 text-lg">هذا الاختبار سيساعدك على معرفة نقاط قوتك والمجالات التي تحتاج إلى تطوير في اللغة العربية. هل أنت مستعد؟</p>
            <button id="start-btn" class="bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-xl hover:bg-sky-700 transition-all duration-300 shadow-lg hover:shadow-xl">ابدأ الاختبار</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div id="progress-text" class="text-lg font-bold text-gray-700"></div>
                <div id="score-text" class="text-lg font-bold text-sky-600"></div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-sky-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <h2 id="question-text" class="text-2xl font-bold mb-6 text-center text-gray-800 min-h-[100px]"></h2>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Options will be injected here -->
            </div>
            <p id="hint-text" class="text-center text-gray-500 mt-6 text-sm"></p>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden text-center">
            <h1 class="text-3xl font-bold text-sky-800 mb-4">انتهى الاختبار!</h1>
            <p class="text-gray-700 text-xl mb-2">نتيجتك النهائية هي:</p>
            <p id="final-score" class="text-5xl font-bold text-amber-500 mb-8"></p>
            <div id="remedial-plan-container" class="text-right p-6 bg-stone-50 rounded-lg border border-stone-200">
                <h3 class="text-2xl font-bold text-sky-700 mb-4 text-center">خطة علاجية مقترحة</h3>
                <!-- Remedial plan will be injected here -->
            </div>
            <button id="restart-btn" class="mt-8 bg-sky-600 text-white font-bold py-3 px-8 rounded-lg text-xl hover:bg-sky-700 transition-all duration-300 shadow-lg hover:shadow-xl">إعادة الاختبار</button>
        </div>

    </div>

    <script>
        const quizData = [
            { question: "بعد قراءة فقرة \"أنا نملة سليمان...\"، ماذا كانت جماعة النمل تدّخر في فصل الصيف؟", hint: "ابحث في الجملة الأخيرة من الفقرة عن الشيء الذي كانت النملة وجماعتها يجمعونه.", options: ["الماء", "الملابس", "الكثير من الطعام", "الأخشاب"], answer: "الكثير من الطعام" },
            { question: "أكمل الجملة التالية بالشكل الصحيح: \"كتبتُ قصيدةً __ عن الوطن.\"", hint: "الكلمة هنا منصوبة، فهل نستخدم النون الساكنة أم تنوين النصب؟", options: ["رائعةً", "رائعن"], answer: "رائعةً" },
            { question: "اختر الشكل الصحيح للهمزة في كلمة \"ذِ__بًا\".", hint: "انظر إلى حركة الهمزة (الساكنة) وحركة الحرف الذي قبلها (الكسرة). الكسرة هي أقوى الحركات.", options: ["ذَأبًا", "ذِئْبًا", "ذُؤْبًا"], answer: "ذِئْبًا" },
            { question: "ما نوع جملة \"هذا صديقي\"؟", hint: "بأي نوع من الكلمات بدأت الجملة؟ هل هو اسم أم فعل؟", options: ["جملة اسمية", "جملة فعلية"], answer: "جملة اسمية" },
            { question: "اختر الشكل الصحيح للهمزة في بداية كلمة \"__ستسلم\".", hint: "هذا فعل ماضٍ سداسي. فكر في قاعدة همزة الأفعال الخماسية والسداسية.", options: ["أستسلم", "إستسلم", "استسلم"], answer: "استسلم" },
            { question: "عند تحويل جملة \"المعلم شرح الدرس\" إلى جملة فعلية، ماذا تصبح؟", hint: "الجملة الفعلية يجب أن تبدأ بالفعل.", options: ["الدرس شرحه المعلم.", "شرح المعلم الدرس.", "كان المعلم يشرح الدرس."], answer: "شرح المعلم الدرس." },
            { question: "أي سؤال مما يلي هو الأنسب للحصول على إجابة \"نذهب إلى المدرسة صباحًا\"؟", hint: "الإجابة تحتوي على زمان. ابحث عن أداة الاستفهام التي تسأل عن الزمان.", options: ["أين تذهبون؟", "كيف تذهبون إلى المدرسة؟", "متى تذهبون إلى المدرسة؟", "لماذا تذهبون إلى المدرسة؟"], answer: "متى تذهبون إلى المدرسة؟" },
            { question: "اختر الكلمة التي تحتوي على حرف يُنطق ولا يُكتب.", hint: "جرّب نطق كل كلمة ببطء. هل تسمع صوت حرف غير موجود في الكتابة؟", options: ["مدرسة", "أبي", "لكن", "من"], answer: "لكن" }
        ];

        const remedialPlanHTML = `
            <div class="space-y-6">
                <div>
                    <h4 class="text-xl font-bold text-sky-600 mb-2">1. مهارات الإملاء (الهمزات والتنوين)</h4>
                    <ul class="list-disc pr-6 space-y-2 text-gray-700">
                        <li><strong>لعبة الحذف:</strong> للتمييز بين النون والتنوين، احذف الصوت الأخير. إذا بقي للكلمة معنى (بيتٌ -> بيت)، فهو تنوين.</li>
                        <li><strong>أقوى الحركات:</strong> لتعلم الهمزة المتوسطة، تذكر سلم القوة: كسرة > ضمة > فتحة > سكون.</li>
                        <li><strong>بطاقات الفرز:</strong> استخدم بطاقات لكلمات تبدأ بهمزة وصل (انطلق، الكتاب) وقطع (أحمد، أكل) وقم بفرزها.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold text-sky-600 mb-2">2. مهارات النحو (بناء الجملة)</h4>
                    <ul class="list-disc pr-6 space-y-2 text-gray-700">
                        <li><strong>مكعبات الجمل:</strong> استخدم بطاقات لكلمات (أسماء، أفعال) وقم بتكوين جمل فعلية واسمية.</li>
                        <li><strong>لعبة أدوات الاستفهام:</strong> اكتب جملة كاملة، ثم صغ سؤالاً لكل جزء منها باستخدام (من؟ ماذا؟ أين؟ متى؟).</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold text-sky-600 mb-2">3. مهارات لغوية خاصة</h4>
                    <ul class="list-disc pr-6 space-y-2 text-gray-700">
                        <li><strong>قائمة الكلمات المشهورة:</strong> أعد قائمة بكلمات بها حروف تنطق ولا تكتب (هذا، هذه، لكن، الله) وعلقها في مكان بارز.</li>
                        <li><strong>الإملاء المنظور:</strong> اعرض إحدى هذه الكلمات لثوانٍ، ثم أخفها واطلب من الطالب كتابتها لترسيخ شكلها.</li>
                    </ul>
                </div>
            </div>
        `;

        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        const progressText = document.getElementById('progress-text');
        const scoreText = document.getElementById('score-text');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const hintText = document.getElementById('hint-text');
        
        const finalScore = document.getElementById('final-score');
        const remedialPlanContainer = document.getElementById('remedial-plan-container');

        let currentQuestionIndex = 0;
        let score = 0;

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = quizData[currentQuestionIndex];
            progressText.innerText = `السؤال ${currentQuestionIndex + 1} / ${quizData.length}`;
            scoreText.innerText = `النتيجة: ${score}`;
            progressBar.style.width = `${((currentQuestionIndex + 1) / quizData.length) * 100}%`;
            questionText.innerText = currentQuestion.question;
            hintText.innerText = `تلميح: ${currentQuestion.hint}`;

            currentQuestion.options.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option;
                button.classList.add('option-btn', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'text-lg', 'font-semibold', 'bg-stone-50', 'hover:bg-sky-100', 'border-gray-200');
                button.addEventListener('click', selectAnswer);
                optionsContainer.appendChild(button);
            });
        }

        function resetState() {
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.target;
            const isCorrect = selectedBtn.innerText === quizData[currentQuestionIndex].answer;

            if (isCorrect) {
                score++;
                selectedBtn.classList.add('correct');
            } else {
                selectedBtn.classList.add('incorrect');
            }
            
            Array.from(optionsContainer.children).forEach(button => {
                if (button.innerText === quizData[currentQuestionIndex].answer) {
                    if(!isCorrect) button.classList.add('correct');
                }
                button.disabled = true;
            });
            
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < quizData.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, 1500);
        }
        
        function showResult() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            finalScore.innerText = `${score} / ${quizData.length}`;
            remedialPlanContainer.innerHTML += remedialPlanHTML;
        }

        startBtn.addEventListener('click', startQuiz);
        restartBtn.addEventListener('click', startQuiz);

    </script>
</body>
</html>
